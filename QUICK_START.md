# üöÄ –ë—ã—Å—Ç—Ä—ã–π –°—Ç–∞—Ä—Ç - –°–∏—Å—Ç–µ–º–∞ –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏

## –®–∞–≥ 1: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
# Backend
cd backend
npm install

# Frontend
cd ../frontend
npm install
```

## –®–∞–≥ 2: –ó–∞–ø—É—Å–∫ Redis (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –Ω–æ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

### Windows:
```bash
# –°–∫–∞—á–∞–π—Ç–µ Redis –¥–ª—è Windows –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ WSL
wsl redis-server
```

### macOS:
```bash
brew install redis
redis-server
```

### Linux:
```bash
sudo systemctl start redis
```

### Docker (—É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–æ):
```bash
docker run -d -p 6379:6379 redis:alpine
```

**–ü—Ä–æ–≤–µ—Ä–∫–∞:**
```bash
redis-cli ping
# –î–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å: PONG
```

## –®–∞–≥ 3: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

### Backend `.env`
```env
# Database
DATABASE_HOST=localhost
DATABASE_PORT=5432
DATABASE_USER=postgres
DATABASE_PASSWORD=your_password
DATABASE_NAME=telegram_app

# Redis
REDIS_HOST=localhost
REDIS_PORT=6379

# JWT
JWT_SECRET=your-super-secret-jwt-key-min-32-chars

# Telegram
TELEGRAM_BOT_TOKEN=your_bot_token
```

## –®–∞–≥ 4: –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

### Terminal 1: Backend
```bash
cd backend
npm run start:dev
```

**–û–∂–∏–¥–∞–µ–º—ã–µ –ª–æ–≥–∏:**
```
üöÄ Application is running on: http://localhost:3000
‚úÖ Redis connected successfully
‚úÖ Subscribed to sync:* events
üåê WebSocket Gateway initialized
‚úÖ BotService subscribed to sync events
```

### Terminal 2: Frontend
```bash
cd frontend
npm run dev
```

**–û—Ç–∫—Ä–æ–π—Ç–µ:** http://localhost:5173

## –®–∞–≥ 5: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏

### 1. –û—Ç–∫—Ä–æ–π—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ (F12)

–í—ã –¥–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å:
```
üîå Connecting to WebSocket: http://localhost:3000/sync
‚úÖ WebSocket connected: <socket-id>
üì° WebSocket server confirmed connection
```

### 2. –¢–µ—Å—Ç —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤

1. –û—Ç–∫—Ä–æ–π—Ç–µ **Admin Panel ‚Üí –°—Ü–µ–Ω–∞—Ä–∏–∏**
2. –ù–∞–∂–º–∏—Ç–µ **"+ –°–æ–∑–¥–∞—Ç—å —Å—Ü–µ–Ω–∞—Ä–∏–π"**
3. –ó–∞–ø–æ–ª–Ω–∏—Ç–µ —Ñ–æ—Ä–º—É:
   - –ù–∞–∑–≤–∞–Ω–∏–µ: `–¢–µ—Å—Ç —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏`
   - –¢—Ä–∏–≥–≥–µ—Ä: `–ø—Ä–∏–≤–µ—Ç`
   - –û—Ç–≤–µ—Ç: `–ó–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ!`
4. –ù–∞–∂–º–∏—Ç–µ **"–°–æ–∑–¥–∞—Ç—å"**

**–í –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞:**
```
üì® Sync event received: scenarios.created {...}
üîÑ Auto-refetching data due to sync event
```

**–í –ª–æ–≥–∞—Ö backend:**
```
üì§ Publishing event: scenarios.created
üóëÔ∏è Invalidated 1 cache entries for scenarios
```

### 3. –¢–µ—Å—Ç –±–æ—Ç–∞

1. –û—Ç–∫—Ä–æ–π—Ç–µ Telegram –±–æ—Ç
2. –û—Ç–ø—Ä–∞–≤—å—Ç–µ `/start`
3. –û—Ç–ø—Ä–∞–≤—å—Ç–µ `–ø—Ä–∏–≤–µ—Ç`
4. –ë–æ—Ç –æ—Ç–≤–µ—Ç–∏—Ç: `–ó–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ!`

### 4. –¢–µ—Å—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∫–Ω–æ–ø–æ–∫

1. **Admin Panel ‚Üí –ö–Ω–æ–ø–∫–∏**
2. –°–æ–∑–¥–∞–π—Ç–µ –∫–Ω–æ–ø–∫—É:
   - –ú–µ—Ç–∫–∞: `üí∞ –ë–∞–ª–∞–Ω—Å`
   - –î–µ–π—Å—Ç–≤–∏–µ: `command` ‚Üí `balance`
   - –°—Ç—Ä–æ–∫–∞: `1`, –ö–æ–ª–æ–Ω–∫–∞: `1`
3. –ù–∞–∂–º–∏—Ç–µ **"–°–æ–∑–¥–∞—Ç—å"**

**–í –±–æ—Ç–µ:**
- –û—Ç–ø—Ä–∞–≤—å—Ç–µ `/menu`
- –ö–Ω–æ–ø–∫–∞ –ø–æ—è–≤–∏—Ç—Å—è **–º–≥–Ω–æ–≤–µ–Ω–Ω–æ** (–±–ª–∞–≥–æ–¥–∞—Ä—è –∏–Ω–≤–∞–ª–∏–¥–∞—Ü–∏–∏ –∫–µ—à–∞)

## üéØ –ü—Ä–æ–≤–µ—Ä–æ—á–Ω—ã–π —Å–ø–∏—Å–æ–∫

- [ ] Backend –∑–∞–ø—É—â–µ–Ω –Ω–∞ `http://localhost:3000`
- [ ] Frontend –∑–∞–ø—É—â–µ–Ω –Ω–∞ `http://localhost:5173`
- [ ] Redis —Ä–∞–±–æ—Ç–∞–µ—Ç (–∏–ª–∏ —Å–∏—Å—Ç–µ–º–∞ –≤ local-only —Ä–µ–∂–∏–º–µ)
- [ ] WebSocket –ø–æ–¥–∫–ª—é—á–µ–Ω (—Å–º–æ—Ç—Ä–∏ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞)
- [ ] –ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —Å—Ü–µ–Ω–∞—Ä–∏—è –≤ –∫–æ–Ω—Å–æ–ª–∏ –ø–æ—è–≤–ª—è–µ—Ç—Å—è `sync:event`
- [ ] –ë–æ—Ç –æ—Ç–≤–µ—á–∞–µ—Ç –Ω–∞ –Ω–æ–≤—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏ —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è
- [ ] –ò–∑–º–µ–Ω–µ–Ω–∏—è –∫–Ω–æ–ø–æ–∫ –æ—Ç—Ä–∞–∂–∞—é—Ç—Å—è –≤ –±–æ—Ç–µ –±–µ–∑ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å–æ–±—ã—Ç–∏–π

### –í —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏ (Redis)
```bash
redis-cli PSUBSCRIBE "sync:*"
```

### –õ–æ–≥–∏ Backend
```bash
cd backend
npm run start:dev
# –°–º–æ—Ç—Ä–∏—Ç–µ –ª–æ–≥–∏ –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ
```

### –õ–æ–≥–∏ Frontend
–û—Ç–∫—Ä–æ–π—Ç–µ **DevTools ‚Üí Console** (F12)

## ‚ö†Ô∏è –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### WebSocket –Ω–µ –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, –∑–∞–ø—É—â–µ–Ω –ª–∏ backend
curl http://localhost:3000/api

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ CORS
# –í backend/src/main.ts –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å:
app.enableCors({
  origin: 'http://localhost:5173',
  credentials: true,
});
```

### Redis –Ω–µ –∑–∞–ø—É—â–µ–Ω
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞
redis-cli ping

# –ï—Å–ª–∏ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç, —Å–∏—Å—Ç–µ–º–∞ –±—É–¥–µ—Ç –≤ local-only —Ä–µ–∂–∏–º–µ
# (—Å–æ–±—ã—Ç–∏—è –±—É–¥—É—Ç —Ä–∞–±–æ—Ç–∞—Ç—å —Ç–æ–ª—å–∫–æ –Ω–∞ –æ–¥–Ω–æ–º —Å–µ—Ä–≤–µ—Ä–µ)
```

### –£—Å—Ç–∞—Ä–µ–≤—à–∏–µ –¥–∞–Ω–Ω—ã–µ –≤ –±–æ—Ç–µ
```bash
# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ backend
cd backend
npm run start:dev

# –ò–ª–∏ –æ—á–∏—Å—Ç–∏—Ç–µ –∫–µ—à –≤—Ä—É—á–Ω—É—é
redis-cli FLUSHDB
```

## üéâ –ì–æ—Ç–æ–≤–æ!

–°–∏—Å—Ç–µ–º–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ —Ä–∞–±–æ—Ç–∞–µ—Ç!

**–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:**
1. ‚úÖ –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∞–¥–º–∏–Ω–∫–µ ‚Üí Events ‚Üí Redis ‚Üí WebSocket ‚Üí Frontend –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è
2. ‚úÖ –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∞–¥–º–∏–Ω–∫–µ ‚Üí Events ‚Üí –ò–Ω–≤–∞–ª–∏–¥–∞—Ü–∏—è –∫–µ—à–∞ ‚Üí –ë–æ—Ç –∑–∞–≥—Ä—É–∂–∞–µ—Ç —Å–≤–µ–∂–∏–µ –¥–∞–Ω–Ω—ã–µ
3. ‚úÖ –î–µ–π—Å—Ç–≤–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π ‚Üí Backend ‚Üí WebSocket ‚Üí –ê–¥–º–∏–Ω–∫–∞ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è
4. ‚úÖ –í—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç –µ–¥–∏–Ω—É—é –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö

**–°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:**
- –ò–∑—É—á–∏—Ç–µ `SYNC_SYSTEM.md` –¥–ª—è –¥–µ—Ç–∞–ª—å–Ω–æ–≥–æ –ø–æ–Ω–∏–º–∞–Ω–∏—è
- –ù–∞—Å—Ç—Ä–æ–π—Ç–µ production –æ–∫—Ä—É–∂–µ–Ω–∏–µ (–Ω–∞—Å—Ç—Ä–æ–π—Ç–µ CORS, SSL, etc.)
- –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ (–Ω–µ—Å–∫–æ–ª—å–∫–æ –∏–Ω—Å—Ç–∞–Ω—Å–æ–≤ backend)

---

**–ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏:**
- –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è: `SYNC_SYSTEM.md`
- Swagger API: http://localhost:3000/api/docs
- Frontend: http://localhost:5173

