# –ß–µ–∫–ª–∏—Å—Ç –¥–ª—è –ø–µ—Ä–µ–Ω–æ—Å–∞ –±–æ—Ç–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä

## ‚úÖ –ü–µ—Ä–µ–¥ –ø–µ—Ä–µ–Ω–æ—Å–æ–º –Ω–∞ —Å–µ—Ä–≤–µ—Ä

### 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–µ–∫—É—â–µ–≥–æ —Å—Ç–∞—Ç—É—Å–∞
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å –±–æ—Ç–∞ (–∑–∞–º–µ–Ω–∏—Ç–µ YOUR_BOT_TOKEN –Ω–∞ –≤–∞—à —Ç–æ–∫–µ–Ω)
node check-bot-status.js YOUR_BOT_TOKEN
```

### 2. –£–¥–∞–ª–µ–Ω–∏–µ webhook (–µ—Å–ª–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω)
```bash
# –£–¥–∞–ª–∏—Ç–µ webhook –ø–µ—Ä–µ–¥ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º polling
curl -X POST "https://api.telegram.org/botYOUR_BOT_TOKEN/deleteWebhook?drop_pending_updates=true"
```

### 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ:
- ‚ùå –ù–µ—Ç –¥—Ä—É–≥–∏—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ —Å —Ç–µ–º –∂–µ —Ç–æ–∫–µ–Ω–æ–º –±–æ—Ç–∞
- ‚ùå –ù–µ—Ç –¥—Ä—É–≥–∏—Ö Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ —Å —ç—Ç–∏–º –±–æ—Ç–æ–º
- ‚ùå Webhook –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω –Ω–∞ –¥—Ä—É–≥–æ–π URL
- ‚úÖ –ü–æ—Ä—Ç 3000 (–∏–ª–∏ –¥—Ä—É–≥–æ–π) —Å–≤–æ–±–æ–¥–µ–Ω –¥–ª—è backend
- ‚úÖ PostgreSQL, Redis, MinIO –¥–æ—Å—Ç—É–ø–Ω—ã

## üöÄ –ü–µ—Ä–µ–Ω–æ—Å –Ω–∞ —Å–µ—Ä–≤–µ—Ä

### 1. –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–æ–≤
```bash
# –ù–∞ –ª–æ–∫–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω–µ
scp -r . user@server:/path/to/project
# –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ git
git push origin main
# –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ
git pull origin main
```

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ .env –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
```bash
# –°–∫–æ–ø–∏—Ä—É–π—Ç–µ .env —Ñ–∞–π–ª –∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –≤—Å–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
cp .env.example .env
nano .env
```

### 3. –ó–∞–ø—É—Å–∫ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
```bash
# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –≤—Å–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã (–µ—Å–ª–∏ –±—ã–ª–∏ –∑–∞–ø—É—â–µ–Ω—ã)
docker-compose down

# –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –Ω–µ—Ç –¥—Ä—É–≥–∏—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ —Å —Ç–æ–∫–µ–Ω–æ–º
ps aux | grep node
docker ps | grep bot

# –ó–∞–ø—É—Å—Ç–∏—Ç–µ –∑–∞–Ω–æ–≤–æ
docker-compose up -d --build

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏
docker-compose logs -f backend
```

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Å–ª–µ –ø–µ—Ä–µ–Ω–æ—Å–∞

### 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤
```bash
docker-compose logs backend --tail=50 | grep -E "409|Conflict|Polling|successfully started"
```

### 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ –±–æ—Ç–∞
```bash
# –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ
node check-bot-status.js YOUR_BOT_TOKEN
```

### 3. –¢–µ—Å—Ç –±–æ—Ç–∞
–û—Ç–ø—Ä–∞–≤—å—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –±–æ—Ç—É –≤ Telegram –∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –æ–Ω –æ—Ç–≤–µ—á–∞–µ—Ç.

## ‚ö†Ô∏è –ï—Å–ª–∏ –æ—à–∏–±–∫–∞ 409 –≤—Å–µ –µ—â–µ –≤–æ–∑–Ω–∏–∫–∞–µ—Ç

1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥—Ä—É–≥–∏–µ —Å–µ—Ä–≤–µ—Ä—ã/–ø—Ä–æ—Ü–µ—Å—Å—ã:**
   ```bash
   # –ù–∞ –≤—Å–µ—Ö —Å–µ—Ä–≤–µ—Ä–∞—Ö, –≥–¥–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –∑–∞–ø—É—â–µ–Ω –±–æ—Ç
   ps aux | grep node
   docker ps -a
   ```

2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ webhook:**
   ```bash
   curl "https://api.telegram.org/botYOUR_BOT_TOKEN/getWebhookInfo"
   ```

3. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ webhook –≤–º–µ—Å—Ç–æ polling:**
   - –ù–∞—Å—Ç—Ä–æ–π—Ç–µ webhook –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
   - –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ `USE_WEBHOOK=true` –≤ .env
   - –ù–∞—Å—Ç—Ä–æ–π—Ç–µ webhook —á–µ—Ä–µ–∑ API: `POST /api/bot/set-webhook`

## üìù –í–∞–∂–Ω—ã–µ –º–æ–º–µ–Ω—Ç—ã

- **–û–¥–∏–Ω —Ç–æ–∫–µ–Ω = –æ–¥–∏–Ω –∞–∫—Ç–∏–≤–Ω—ã–π —ç–∫–∑–µ–º–ø–ª—è—Ä** - Telegram –Ω–µ –ø–æ–∑–≤–æ–ª—è–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–∏–º —ç–∫–∑–µ–º–ø–ª—è—Ä–∞–º –ø–æ–ª—É—á–∞—Ç—å –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ
- **Polling vs Webhook** - –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω –º–µ—Ç–æ–¥ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ
- **–ü–æ—Å–ª–µ –ø–µ—Ä–µ–Ω–æ—Å–∞** - —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Å—Ç–∞—Ä—ã–π —ç–∫–∑–µ–º–ø–ª—è—Ä –ø–æ–ª–Ω–æ—Å—Ç—å—é –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω

