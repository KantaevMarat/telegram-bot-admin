# üöÄ –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ Git

## ‚úÖ –ò–∑–º–µ–Ω–µ–Ω–∏—è –∑–∞–ø—É—à–µ–Ω—ã –Ω–∞ GitHub!

–ö–æ–º–º–∏—Ç: `4f77591`
–í–µ—Ç–∫–∞: `sync/cleanup/2025-10-29`

---

## üìã –®–∞–≥–∏ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ:

### –®–∞–≥ 1: –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ —Å–µ—Ä–≤–µ—Ä—É
```bash
ssh -i "C:\Users\–ú–∞—Ä–∞—Ç\.ssh\telegram_bot_admin" root@79.174.93.115
# –ü–∞—Ä–æ–ª—å: qOAkAE8P1VRGou71
```

### –®–∞–≥ 2: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–¥–∞ —Å GitHub
```bash
cd ~/telegram-bot-admin

# –°–æ—Ö—Ä–∞–Ω–∏–º –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ .env –µ—Å–ª–∏ –µ—Å—Ç—å
git stash

# –ü–µ—Ä–µ–∫–ª—é—á–∞–µ–º—Å—è –Ω–∞ –Ω—É–∂–Ω—É—é –≤–µ—Ç–∫—É (–µ—Å–ª–∏ –Ω–µ –Ω–∞ –Ω–µ–π)
git checkout sync/cleanup/2025-10-29

# –ü–æ–¥—Ç—è–≥–∏–≤–∞–µ–º –∏–∑–º–µ–Ω–µ–Ω–∏—è
git pull origin sync/cleanup/2025-10-29

# –í–æ–∑–≤—Ä–∞—â–∞–µ–º .env
git stash pop
```

### –®–∞–≥ 3: –ú–∏–≥—Ä–∞—Ü–∏—è –ë–î
```bash
cd ~/telegram-bot-admin/backend

# –ó–∞–ø—É—Å–∫–∞–µ–º –º–∏–≥—Ä–∞—Ü–∏—é –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –ø–æ–ª—è min_completion_time
node add-min-completion-time-column.js
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
```
‚úÖ Connected to database
‚úÖ Column min_completion_time added successfully
```

### –®–∞–≥ 4: –ü–µ—Ä–µ—Å–±–æ—Ä–∫–∞ Backend
```bash
cd ~/telegram-bot-admin/backend

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)
npm install

# –ö–æ–º–ø–∏–ª—è—Ü–∏—è TypeScript
npm run build
```

### –®–∞–≥ 5: –ü–µ—Ä–µ—Å–±–æ—Ä–∫–∞ Frontend
```bash
cd ~/telegram-bot-admin/frontend

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)
npm install

# –°–±–æ—Ä–∫–∞ production –≤–µ—Ä—Å–∏–∏
npm run build
```

### –®–∞–≥ 6: –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
```bash
cd ~/telegram-bot-admin

# –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã
docker-compose down

# –ü–µ—Ä–µ—Å–æ–±–∏—Ä–∞–µ–º –æ–±—Ä–∞–∑—ã —Å –Ω–æ–≤—ã–º –∫–æ–¥–æ–º
docker-compose build

# –ó–∞–ø—É—Å–∫–∞–µ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã
docker-compose up -d

# –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–∞—Ç—É—Å
docker-compose ps
```

### –®–∞–≥ 7: –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤
```bash
# Backend –ª–æ–≥–∏
docker logs tg-backend --tail 50

# Frontend –ª–æ–≥–∏
docker logs tg-frontend --tail 20

# –ü—Ä–æ–≤–µ—Ä–∫–∞, —á—Ç–æ API —Ä–∞–±–æ—Ç–∞–µ—Ç
curl -s http://localhost:3001/health
```

---

## üß™ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏:

### 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ API
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —ç–Ω–¥–ø–æ–∏–Ω—Ç–∞ –º–æ–¥–µ—Ä–∞—Ü–∏–∏
curl -s "http://localhost:3001/api/admin/tasks/moderation/pending"
```

### 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–¥–º–∏–Ω–∫–∏ (–≤ –±—Ä–∞—É–∑–µ—Ä–µ)
1. –û—Ç–∫—Ä–æ–π—Ç–µ https://app.marranasuete.ru
2. –í–æ–π–¥–∏—Ç–µ –≤ –∞–¥–º–∏–Ω–∫—É
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ:
   - ‚úÖ –ù–æ–≤—ã–π –ø—É–Ω–∫—Ç –º–µ–Ω—é **"–ú–æ–¥–µ—Ä–∞—Ü–∏—è"** (–∏–∫–æ–Ω–∫–∞ —á–∞—Å–æ–≤)
   - ‚úÖ –í "–ó–∞–¥–∞–Ω–∏—è" ‚Üí –ø–æ–ª–µ **"‚è±Ô∏è –ú–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è"**
   - ‚úÖ –í "–ö–Ω–æ–ø–∫–∏" ‚Üí –ø–æ–¥—Å–∫–∞–∑–∫–∞ –¥–ª—è **callback data**
   - ‚úÖ –í "–ß–∞—Ç—ã" ‚Üí –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ `@username` –∏ —Å—á–µ—Ç—á–∏–∫ –º–µ–¥–∏–∞

### 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–æ—Ç–∞ (Telegram)
1. –ù–∞—á–Ω–∏—Ç–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∑–∞–¥–∞–Ω–∏—è —Å `min_completion_time > 0`
2. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Å—Ä–∞–∑—É –ø–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å
3. –î–æ–ª–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å: **"‚è≥ –ü–æ–¥–æ–∂–¥–∏—Ç–µ –Ω–µ–º–Ω–æ–≥–æ!"**

---

## üéØ –ß—Ç–æ –¥–æ–ª–∂–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å:

### –í –±–æ—Ç–µ:
- ‚è±Ô∏è –ó–∞–¥–µ—Ä–∂–∫–∞ –ø–µ—Ä–µ–¥ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ–º –∑–∞–¥–∞–Ω–∏–π
- üìã "–ó–∞–¥–∞–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ –Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫—É!" –¥–ª—è —Ä—É—á–Ω—ã—Ö –∑–∞–¥–∞–Ω–∏–π
- ‚úÖ –ê–≤—Ç–æ–æ–¥–æ–±—Ä–µ–Ω–∏–µ –ø—Ä–æ—Å—Ç—ã—Ö –∑–∞–¥–∞–Ω–∏–π

### –í –∞–¥–º–∏–Ω–∫–µ:
- üïí –°—Ç—Ä–∞–Ω–∏—Ü–∞ **–ú–æ–¥–µ—Ä–∞—Ü–∏—è** (`/moderation`)
- üîç –ü–æ–∏—Å–∫ –ø–æ username/ID
- üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –º–æ–¥–µ—Ä–∞—Ü–∏–∏
- üë§ –ü—Ä–∞–≤–∏–ª—å–Ω–æ–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- üì∏ –°—á–µ—Ç—á–∏–∫ –º–µ–¥–∏–∞ –≤ —á–∞—Ç–∞—Ö
- üñºÔ∏è –§–∏–ª—å—Ç—Ä "–ú–µ–¥–∏–∞" –≤ —á–∞—Ç–µ

---

## ‚ùó –í–æ–∑–º–æ–∂–Ω—ã–µ –æ—à–∏–±–∫–∏:

### –û—à–∏–±–∫–∞: "Cannot find module"
**–†–µ—à–µ–Ω–∏–µ:** 
```bash
cd ~/telegram-bot-admin/backend
npm install
```

### –û—à–∏–±–∫–∞: Port 3001 already in use
**–†–µ—à–µ–Ω–∏–µ:**
```bash
docker-compose down
docker-compose up -d
```

### –û—à–∏–±–∫–∞: "Column does not exist"
**–†–µ—à–µ–Ω–∏–µ:** –ü–æ–≤—Ç–æ—Ä–Ω–æ –∑–∞–ø—É—Å—Ç–∏—Ç–µ –º–∏–≥—Ä–∞—Ü–∏—é:
```bash
cd ~/telegram-bot-admin/backend
node add-min-completion-time-column.js
```

---

## üìù –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π —Å–ø–æ—Å–æ–± (–µ—Å–ª–∏ —á—Ç–æ-—Ç–æ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫):

–ï—Å–ª–∏ –≤–æ–∑–Ω–∏–∫–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã —Å docker-compose:

```bash
cd ~/telegram-bot-admin

# –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∏ —É–¥–∞–ª—è–µ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã
docker stop tg-backend tg-frontend
docker rm tg-backend tg-frontend

# –ü–µ—Ä–µ—Å–æ–±–∏—Ä–∞–µ–º backend
cd backend
docker build -t tg-backend .
docker run -d --name tg-backend --network tg-network -p 3001:3001 --env-file .env tg-backend

# –ü–µ—Ä–µ—Å–æ–±–∏—Ä–∞–µ–º frontend
cd ../frontend
docker build -t tg-frontend .
docker run -d --name tg-frontend --network tg-network -p 3000:80 tg-frontend
```

---

**–£–¥–∞—á–∏ —Å —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ–º! üöÄ**

