# ๐ค ะะฐัััะพะนะบะฐ Telegram ะะพัะพะฒ

## ๐ ะะฝัะพัะผะฐัะธั ะพ ะฑะพัะฐั

### 1๏ธโฃ ะะปะธะตะฝััะบะธะน ะฑะพั (ะดะปั ะฟะพะปัะทะพะฒะฐัะตะปะตะน)
**ะขะพะบะตะฝ:** `8330680651:AAErG1_zzA0aX4_O7s-aaQlcCseLF7i8cIE`

**ะะฐะทะฝะฐัะตะฝะธะต:** ะัะฝะพะฒะฝะพะน ะฑะพั ะดะปั ะฒะทะฐะธะผะพะดะตะนััะฒะธั ั ะฟะพะปัะทะพะฒะฐัะตะปัะผะธ

**ะคัะฝะบัะธะธ:**
- โ ะัะฟะพะปะฝะตะฝะธะต ะทะฐะดะฐะฝะธะน
- ๐ฐ ะัะพะฒะตัะบะฐ ะฑะฐะปะฐะฝัะฐ ะธ ะทะฐัะฐะฑะพัะบะฐ
- ๐ฅ ะะตัะตัะฐะปัะฝะฐั ะฟัะพะณัะฐะผะผะฐ
- ๐ธ ะัะฒะพะด ััะตะดััะฒ
- ๐ ะัะพัะผะพัั ะดะพัััะฟะฝัั ะทะฐะดะฐะฝะธะน
- ๐ฌ ะะฑัะตะฝะธะต ั ะฟะพะดะดะตัะถะบะพะน
- ๐ ะะพะดะฟะธัะบะฐ ะฝะฐ ะพะฑัะทะฐัะตะปัะฝัะต ะบะฐะฝะฐะปั

**ะะตะถะธะผ ัะฐะฑะพัั:** Polling (ัะฐะทัะฐะฑะพัะบะฐ) / Webhook (ะฟัะพะดะฐะบัะฝ)

---

### 2๏ธโฃ ะะดะผะธะฝ-ะฑะพั (ะดะปั ะฐะดะผะธะฝะธัััะฐัะพัะพะฒ)
**ะขะพะบะตะฝ:** `8339258038:AAHd4UGAxiDxI57TBi5_REn1GBOg1n50cro`

**ะะฐะทะฝะฐัะตะฝะธะต:** Telegram Web App ะดะปั ัะฟัะฐะฒะปะตะฝะธั ัะธััะตะผะพะน

**ะคัะฝะบัะธะธ:**
- ๐ฅ ะฃะฟัะฐะฒะปะตะฝะธะต ะฟะพะปัะทะพะฒะฐัะตะปัะผะธ (ะฑะปะพะบะธัะพะฒะบะฐ, ัะฐะทะฑะปะพะบะธัะพะฒะบะฐ, ะฟัะพัะผะพัั)
- ๐ ะกะพะทะดะฐะฝะธะต ะธ ัะตะดะฐะบัะธัะพะฒะฐะฝะธะต ะทะฐะดะฐะฝะธะน
- ๐ ะัะพัะผะพัั ััะฐัะธััะธะบะธ ะฒ ัะตะฐะปัะฝะพะผ ะฒัะตะผะตะฝะธ
- ๐ข ะะฐััะพะฒัะต ัะฐัััะปะบะธ ะฟะพะปัะทะพะฒะฐัะตะปัะผ
- ๐ธ ะฃะฟัะฐะฒะปะตะฝะธะต ะทะฐัะฒะบะฐะผะธ ะฝะฐ ะฒัะฒะพะด ััะตะดััะฒ
- ๐ฏ ะะฐัััะพะนะบะฐ ััะตะฝะฐัะธะตะฒ ะธ ะฐะฒัะพะพัะฒะตัะพะฒ
- ๐ฑ ะฃะฟัะฐะฒะปะตะฝะธะต ะพะฑัะทะฐัะตะปัะฝัะผะธ ะบะฐะฝะฐะปะฐะผะธ
- โ๏ธ ะะฐัััะพะนะบะธ ัะธััะตะผั (ะผะธะฝะธะผะฐะปัะฝัะต ััะผะผั, ะฑะพะฝััั, ะธ ั.ะด.)
- ๐ ะะฐัััะพะนะบะฐ ะบะฝะพะฟะพะบ ะธะฝัะตััะตะนัะฐ

**ะะตะถะธะผ ัะฐะฑะพัั:** Polling (ะฒัะตะณะดะฐ)

**ะัะพะฑะตะฝะฝะพััะธ:**
- ะัะบััะฒะฐะตั ะฒะตะฑ-ะธะฝัะตััะตะนั ะฐะดะผะธะฝะบะธ ะฟััะผะพ ะฒ Telegram
- ะัะพะฒะตััะตั ะฟัะฐะฒะฐ ะดะพัััะฟะฐ ะฟะพ Telegram ID
- ะัะฟัะฐะฒะปัะตั ัะฒะตะดะพะผะปะตะฝะธั ะฐะดะผะธะฝะธัััะฐัะพัะฐะผ ะพ ะฒะฐะถะฝัั ัะพะฑััะธัั
- ะะต ััะตะฑัะตั ะฝะฐัััะพะนะบะธ webhook

## โ๏ธ ะะฐัััะพะนะบะฐ ัะฐะนะปะฐ .env

ะกะพะทะดะฐะนัะต ัะฐะนะป `.env` ะฒ ะบะพัะฝะต ะฟัะพะตะบัะฐ ัะพ ัะปะตะดัััะธะผ ัะพะดะตัะถะธะผัะผ:

```env
# Database
POSTGRES_DB=tg_app
POSTGRES_USER=postgres
POSTGRES_PASSWORD=postgres
POSTGRES_PORT=5432
DATABASE_URL=postgresql://postgres:postgres@localhost:5432/tg_app

# Redis
REDIS_HOST=localhost
REDIS_PORT=6379

# Backend
NODE_ENV=development
BACKEND_PORT=3000
JWT_SECRET=your-super-secret-jwt-key-please-change-this-in-production-min-32-chars
JWT_EXPIRES_IN=7d

# Telegram Bot ะดะปั ะฟะพะปัะทะพะฒะฐัะตะปะตะน (ะบะปะธะตะฝััะบะธะน ะฑะพั)
TELEGRAM_BOT_TOKEN=8330680651:AAErG1_zzA0aX4_O7s-aaQlcCseLF7i8cIE
TELEGRAM_WEBHOOK_URL=https://your-domain.com/api/bot/webhook
TELEGRAM_BOT_USERNAME=YourClientBotUsername

# Telegram Bot ะดะปั ะฐะดะผะธะฝ-ะฟะฐะฝะตะปะธ
ADMIN_BOT_TOKEN=8339258038:AAHd4UGAxiDxI57TBi5_REn1GBOg1n50cro
TELEGRAM_WEB_APP_URL=https://your-domain.com

# MinIO / S3
MINIO_ENDPOINT=localhost
MINIO_PORT=9000
MINIO_ROOT_USER=minioadmin
MINIO_ROOT_PASSWORD=minioadmin
MINIO_ACCESS_KEY=minioadmin
MINIO_SECRET_KEY=minioadmin
MINIO_BUCKET=telegram-media
MINIO_USE_SSL=false
MINIO_CONSOLE_PORT=9001

# Frontend
FRONTEND_PORT=5173
VITE_API_URL=http://localhost:3000
VITE_TELEGRAM_BOT_USERNAME=YourClientBotUsername

# Fake Stats Configuration
FAKE_STATS_UPDATE_INTERVAL_HOURS=4
FAKE_STATS_MAX_DELTA_PERCENT=15
FAKE_STATS_MIN_DELTA_PERCENT=-15
FAKE_STATS_TREND_MIN=-0.02
FAKE_STATS_TREND_MAX=0.03
FAKE_STATS_NOISE_STDDEV=0.01

# App Settings
MIN_DEPOSIT=10
MIN_WITHDRAW=20
REF_BONUS=5
MIN_REWARD=1
MAX_REWARD=100
WORK_COOLDOWN_SEC=3600

# Broadcast Settings
BROADCAST_BATCH_SIZE=30
BROADCAST_THROTTLE_MS=1000
```

## ๐ ะััััะฐั ะฝะฐัััะพะนะบะฐ

### ะะฒัะพะผะฐัะธัะตัะบะฐั ะฝะฐัััะพะนะบะฐ (ัะตะบะพะผะตะฝะดัะตััั)

**Linux/macOS:**
```bash
chmod +x setup-bots.sh
./setup-bots.sh
```

**Windows PowerShell:**
```powershell
.\setup-bots.ps1
```

ะกะบัะธะฟั ะฐะฒัะพะผะฐัะธัะตัะบะธ:
- โ ะัะพะฒะตัะธั ัะพะบะตะฝั ะฑะพัะพะฒ
- โ ะะพะปััะธั username ะฑะพัะพะฒ ะธะท Telegram API
- โ ะกะพะทะดะฐัั ะธ ะฝะฐัััะพะธั ัะฐะนะป `.env`
- โ ะะพะบะฐะถะตั ัััะปะบะธ ะฝะฐ ะฒะฐัะธั ะฑะพัะพะฒ

### ะััะฝะฐั ะฝะฐัััะพะนะบะฐ

1. ะกะบะพะฟะธััะนัะต ัะพะดะตัะถะธะผะพะต ะฒััะต ะฒ ัะฐะนะป `.env`
2. ะะฐะผะตะฝะธัะต `your-domain.com` ะฝะฐ ะฒะฐั ัะตะฐะปัะฝัะน ะดะพะผะตะฝ ะธะปะธ ngrok URL
3. ะะฐะผะตะฝะธัะต `YourClientBotUsername` ะฝะฐ username ะบะปะธะตะฝััะบะพะณะพ ะฑะพัะฐ (ะฑะตะท @)

### ะะฐะฟััะบ ะฟัะพะตะบัะฐ

**ะก Docker:**
```bash
docker-compose up -d
```

**ะะตะท Docker:**
```bash
# ะฃััะฐะฝะพะฒะธัะต ะทะฐะฒะธัะธะผะพััะธ
npm install
cd backend && npm install
cd ../frontend && npm install

# ะะฐะฟัััะธัะต PostgreSQL, Redis, MinIO ะปะพะบะฐะปัะฝะพ

# ะะฐะฟัััะธัะต backend
cd backend
npm run start:dev

# ะ ะดััะณะพะผ ัะตัะผะธะฝะฐะปะต ะทะฐะฟัััะธัะต frontend
cd frontend
npm run dev
```

## ๐ฑ ะะฐะบ ัะฐะฑะพัะฐะตั ะฐะดะผะธะฝ-ะฑะพั

1. ะะดะผะธะฝะธัััะฐัะพั ะพัะบััะฒะฐะตั ะฑะพัะฐ ะฒ Telegram
2. ะะพั ะฟะพะบะฐะทัะฒะฐะตั ะบะฝะพะฟะบั "๐ ะัะบัััั ะฐะดะผะธะฝ-ะฟะฐะฝะตะปั"
3. ะัะธ ะฝะฐะถะฐัะธะธ ะพัะบััะฒะฐะตััั ะฒะตะฑ-ะธะฝัะตััะตะนั ะฐะดะผะธะฝะบะธ ะฟััะผะพ ะฒ Telegram
4. ะะดะผะธะฝะธัััะฐัะพั ะผะพะถะตั ัะฟัะฐะฒะปััั ะฒัะตะน ัะธััะตะผะพะน ะฑะตะท ะฒััะพะดะฐ ะธะท Telegram

## ๐ ะะพะฑะฐะฒะปะตะฝะธะต ะฐะดะผะธะฝะธัััะฐัะพัะฐ

ะะพัะปะต ะฟะตัะฒะพะณะพ ะทะฐะฟััะบะฐ ะดะพะฑะฐะฒััะต ัะตะฑั ะบะฐะบ ะฐะดะผะธะฝะธัััะฐัะพัะฐ:

```bash
npm run add-admin -- YOUR_TELEGRAM_USER_ID password123
```

ะะปะธ ัะตัะตะท Docker:

```bash
docker exec -it tg-backend npm run add-admin -- YOUR_TELEGRAM_USER_ID password123
```

## ๐งช ะขะตััะธัะพะฒะฐะฝะธะต

### ะัะพะฒะตัะบะฐ ะบะปะธะตะฝััะบะพะณะพ ะฑะพัะฐ

1. ะัะบัะพะนัะต ะบะปะธะตะฝััะบะพะณะพ ะฑะพัะฐ ะฒ Telegram
2. ะัะฟัะฐะฒััะต ะบะพะผะฐะฝะดั `/start`
3. ะั ะดะพะปะถะฝั ัะฒะธะดะตัั ะฟัะธะฒะตัััะฒะตะฝะฝะพะต ัะพะพะฑัะตะฝะธะต ั ะบะฝะพะฟะบะฐะผะธ ะผะตะฝั
4. ะะพะฟัะพะฑัะนัะต ะบะพะผะฐะฝะดั:
   - `๐ ะะฐะดะฐะฝะธั` - ัะฟะธัะพะบ ะดะพัััะฟะฝัั ะทะฐะดะฐะฝะธะน
   - `๐ฐ ะะฐะปะฐะฝั` - ะฟัะพะฒะตัะบะฐ ะฑะฐะปะฐะฝัะฐ
   - `๐ค ะัะพัะธะปั` - ะธะฝัะพัะผะฐัะธั ะพ ะฟัะพัะธะปะต

### ะัะพะฒะตัะบะฐ ะฐะดะผะธะฝ-ะฑะพัะฐ

1. **ะกะฝะฐัะฐะปะฐ ะดะพะฑะฐะฒััะต ัะตะฑั ะบะฐะบ ะฐะดะผะธะฝะธัััะฐัะพัะฐ:**
   ```bash
   # ะฃะทะฝะฐะนัะต ัะฒะพะน Telegram ID (ะพัะฟัะฐะฒััะต /start ะบะปะธะตะฝััะบะพะผั ะฑะพัั)
   npm run add-admin YOUR_TELEGRAM_ID password123
   
   # ะะปะธ ัะตัะตะท Docker
   docker exec -it tg-backend npm run add-admin YOUR_TELEGRAM_ID password123
   ```

2. **ะัะบัะพะนัะต ะฐะดะผะธะฝ-ะฑะพัะฐ ะฒ Telegram**
3. ะัะฟัะฐะฒััะต ะบะพะผะฐะฝะดั `/start`
4. ะั ะดะพะปะถะฝั ัะฒะธะดะตัั ะบะฝะพะฟะบั "๐ ะัะบัััั ะฐะดะผะธะฝ-ะฟะฐะฝะตะปั"
5. ะะฐะถะผะธัะต ะฝะฐ ะบะฝะพะฟะบั - ะดะพะปะถะตะฝ ะพัะบัััััั ะฒะตะฑ-ะธะฝัะตััะตะนั ะฐะดะผะธะฝะบะธ

### ะัะพะฒะตัะบะฐ ะปะพะณะพะฒ

**Docker:**
```bash
# ะะพะณะธ backend (ะพะฑะฐ ะฑะพัะฐ)
docker-compose logs -f backend

# ะขะพะปัะบะพ ะฐะดะผะธะฝ-ะฑะพั
docker-compose logs -f backend | grep "Admin"
```

**ะะตะท Docker:**
```bash
cd backend
npm run start:dev
# ะกะปะตะดะธัะต ะทะฐ ะปะพะณะฐะผะธ ะฒ ะบะพะฝัะพะปะธ
```

ะั ะดะพะปะถะฝั ัะฒะธะดะตัั:
```
โ Admin bot configured with token: 8339258038...
๐ค Admin Bot initialized
๐ Starting admin bot polling...
๐จ Admin bot received 1 update(s)
```

## ๐ง Troubleshooting

### ะะดะผะธะฝ-ะฑะพั ะฝะต ะพัะฒะตัะฐะตั

1. **ะัะพะฒะตัััะต ัะพะบะตะฝ ะฒ .env:**
   ```bash
   grep ADMIN_BOT_TOKEN .env
   ```
   ะะพะปะถะฝะพ ะฑััั: `ADMIN_BOT_TOKEN=8339258038:AAHd4UGAxiDxI57TBi5_REn1GBOg1n50cro`

2. **ะัะพะฒะตัััะต ะปะพะณะธ:**
   ```bash
   docker-compose logs backend | grep "Admin"
   ```

3. **ะะตัะตะทะฐะฟัััะธัะต backend:**
   ```bash
   docker-compose restart backend
   ```

### ะะตะฑ-ะธะฝัะตััะตะนั ะฝะต ะพัะบััะฒะฐะตััั

1. **ะัะพะฒะตัััะต TELEGRAM_WEB_APP_URL ะฒ .env:**
   - ะะพะปะถะตะฝ ะฑััั HTTPS URL (ะพะฑัะทะฐัะตะปัะฝะพ!)
   - ะัะธะผะตัั: `https://your-domain.com`, `https://abc123.ngrok.io`

2. **ะะปั ะปะพะบะฐะปัะฝะพะน ัะฐะทัะฐะฑะพัะบะธ ะธัะฟะพะปัะทัะนัะต ngrok:**
   ```bash
   ngrok http 5173
   # ะกะบะพะฟะธััะนัะต HTTPS URL ะฒ TELEGRAM_WEB_APP_URL
   ```

3. **ะัะพะฒะตัััะต, ััะพ frontend ะทะฐะฟััะตะฝ:**
   ```bash
   curl http://localhost:5173
   ```

### "ะฃ ะฒะฐั ะฝะตั ะดะพัััะฟะฐ ะบ ะฐะดะผะธะฝ-ะฟะฐะฝะตะปะธ"

1. **ะัะพะฒะตัััะต, ััะพ ะฒั ะดะพะฑะฐะฒะปะตะฝั ะบะฐะบ ะฐะดะผะธะฝะธัััะฐัะพั:**
   ```bash
   docker exec -it tg-backend npm run add-admin YOUR_TELEGRAM_ID password123
   ```

2. **ะฃะทะฝะฐะนัะต ัะฒะพะน Telegram ID:**
   - ะัะฟัะฐะฒััะต `/start` ะบะปะธะตะฝััะบะพะผั ะฑะพัั
   - ID ะฑัะดะตั ะฒ ะปะพะณะฐั backend
   - ะะปะธ ะธัะฟะพะปัะทัะนัะต [@userinfobot](https://t.me/userinfobot)

### ะะปะธะตะฝััะบะธะน ะฑะพั ะฝะต ัะฐะฑะพัะฐะตั

1. **ะัะพะฒะตัััะต ัะพะบะตะฝ:**
   ```bash
   grep TELEGRAM_BOT_TOKEN .env
   ```

2. **ะัะพะฒะตัััะต ัะตะถะธะผ:**
   - ะ development ะดะพะปะถะตะฝ ะฑััั polling
   - ะ production ะฝะฐัััะพะนัะต webhook

3. **ะะพัะผะพััะธัะต ะปะพะณะธ:**
   ```bash
   docker-compose logs backend | grep "BotService"
   ```

## ๐ก ะะพะปะตะทะฝัะต ะบะพะผะฐะฝะดั

### ะะพะปััะธัั ะธะฝัะพัะผะฐัะธั ะพ ะฑะพัะต ัะตัะตะท API

**ะะปะธะตะฝััะบะธะน ะฑะพั:**
```bash
curl "https://api.telegram.org/bot8330680651:AAErG1_zzA0aX4_O7s-aaQlcCseLF7i8cIE/getMe"
```

**ะะดะผะธะฝ-ะฑะพั:**
```bash
curl "https://api.telegram.org/bot8339258038:AAHd4UGAxiDxI57TBi5_REn1GBOg1n50cro/getMe"
```

### ะกะฑัะพัะธัั webhook (ะตัะปะธ ะฝัะถะฝะพ)

```bash
curl "https://api.telegram.org/bot8330680651:AAErG1_zzA0aX4_O7s-aaQlcCseLF7i8cIE/setWebhook?url="
```

### ะัะพะฒะตัะธัั webhook

```bash
curl "https://api.telegram.org/bot8330680651:AAErG1_zzA0aX4_O7s-aaQlcCseLF7i8cIE/getWebhookInfo"
```

## ๐ ะัะธะผะตัะฐะฝะธั

- **ะะปะธะตะฝััะบะธะน ะฑะพั** ัะฐะฑะพัะฐะตั ะฒ ัะตะถะธะผะต polling ะฒ development ะธ webhook ะฒ production
- **ะะดะผะธะฝ-ะฑะพั** ะฒัะตะณะดะฐ ัะฐะฑะพัะฐะตั ะฒ ัะตะถะธะผะต polling ะดะปั ะฟัะพััะพัั ัะฐะทัะฐะฑะพัะบะธ
- ะะฑะฐ ะฑะพัะฐ ะฝะตะทะฐะฒะธัะธะผั ะดััะณ ะพั ะดััะณะฐ ะธ ะธัะฟะพะปัะทััั ัะฐะทะฝัะต ัะพะบะตะฝั
- ะะดะผะธะฝ-ะฑะพั ะฝะต ััะตะฑัะตั webhook ะฝะฐัััะพะนะบะธ
- ะะปั ัะฐะฑะพัั Web App ะฝะตะพะฑัะพะดะธะผ HTTPS (ะธัะฟะพะปัะทัะนัะต ngrok ะดะปั ะปะพะบะฐะปัะฝะพะน ัะฐะทัะฐะฑะพัะบะธ)
- Telegram Web App ัะฐะฑะพัะฐะตั ัะพะปัะบะพ ั HTTPS ะดะพะผะตะฝะฐะผะธ

## ๐ฏ ะััะธัะตะบัััะฐ

```
โโโโโโโโโโโโโโโโโโโ         โโโโโโโโโโโโโโโโโโโ
โ  ะะปะธะตะฝััะบะธะน ะฑะพั โ         โ    ะะดะผะธะฝ-ะฑะพั    โ
โ   (ะฟะพะปัะทะพะฒะฐัะตะปะธ)โ         โ (ะฐะดะผะธะฝะธัััะฐัะพัั)โ
โโโโโโโโโโฌโโโโโโโโโ         โโโโโโโโโโฌโโโโโโโโโ
         โ                           โ
         โ Polling/Webhook           โ Polling
         โ                           โ
         โโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
         โ                           โ
         โผ                           โผ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ           Backend (NestJS)              โ
โ  โโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโ   โ
โ  โ BotService  โ    โAdminBotServ.โ   โ
โ  โโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโ   โ
โ                                         โ
โ         PostgreSQL + Redis              โ
โโโโโโโโโโโโโโโโฌโโโโโโโโโโโโโโโโโโโโโโโโโโโ
               โ
               โ Web App URL (HTTPS)
               โผ
      โโโโโโโโโโโโโโโโโโโ
      โ   Frontend      โ
      โ  (React + Vite) โ
      โโโโโโโโโโโโโโโโโโโ
```

