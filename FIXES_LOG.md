# üîß FIXES LOG - –ì–†–£–ü–ü–ê 1: –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –±–∞–≥–∏

**–î–∞—Ç–∞ –Ω–∞—á–∞–ª–∞**: 2025-10-26 15:23  
**–í–µ—Ç–∫–∞**: feature/fix-critical-bugs-group1  
**Backup**: backup/20251026_152328

---

## üéØ –¶–µ–ª—å

–ò—Å–ø—Ä–∞–≤–∏—Ç—å –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –±–∞–≥–∏, –∫–æ—Ç–æ—Ä—ã–µ –±–ª–æ–∫–∏—Ä—É—é—Ç –Ω–æ—Ä–º–∞–ª—å–Ω—É—é —Ä–∞–±–æ—Ç—É –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.

## üìã –°–ø–∏—Å–æ–∫ –±–∞–≥–æ–≤

### 1. ‚ùå UUID Error –≤ —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–æ–π —Å–∏—Å—Ç–µ–º–µ
**–°—Ç–∞—Ç—É—Å**: üîç –í —Ä–∞–±–æ—Ç–µ  
**–§–∞–π–ª**: `backend/src/modules/bot/bot.service.ts` (–ø—Ä–µ–¥–ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω–æ)  
**–ü—Ä–æ–±–ª–µ–º–∞**:  
```
QueryFailedError: invalid input syntax for type uuid: "6971844353"
SELECT COUNT(*) FROM users WHERE referred_by = $1 -- PARAMETERS: ["6971844353"]
```
–ö–æ–¥ –ø—ã—Ç–∞–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `tg_id` (string) –≤–º–µ—Å—Ç–æ `id` (UUID) –≤ –ø–æ–ª–µ `referred_by`.

**–†–µ—à–µ–Ω–∏–µ**: –ò–∑–º–µ–Ω–∏—Ç—å –ª–æ–≥–∏–∫—É –ø–æ–∏—Å–∫–∞ —Ä–µ—Ñ–µ—Ä–∞–ª–æ–≤, –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `id` –≤–º–µ—Å—Ç–æ `tg_id`.

---

### 2. ‚ùå TypeScript –æ—à–∏–±–∫–∏ frontend (4 –æ—à–∏–±–∫–∏)
**–°—Ç–∞—Ç—É—Å**: ‚è≥ –û–∂–∏–¥–∞–µ—Ç  
**–§–∞–π–ª**: `frontend/src/pages/UserAppPage.tsx`  
**–ü—Ä–æ–±–ª–µ–º—ã**:
- Property 'Telegram' type mismatch
- Property 'expand' does not exist
- Property 'initDataUnsafe' does not exist  
- Property 'active' does not exist on Task

---

### 3. ‚ùå Failing test
**–°—Ç–∞—Ç—É—Å**: ‚è≥ –û–∂–∏–¥–∞–µ—Ç  
**–§–∞–π–ª**: `backend/src/modules/stats/fake-stats.service.spec.ts`  
**–ü—Ä–æ–±–ª–µ–º–∞**: Mock repository missing `createQueryBuilder` method

---

### 4. ‚ùå –°–ª–∞–±–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è JWT_SECRET
**–°—Ç–∞—Ç—É—Å**: ‚è≥ –û–∂–∏–¥–∞–µ—Ç  
**–ü—Ä–æ–±–ª–µ–º–∞**: –ù–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å–∏–ª—ã JWT_SECRET –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

---

## üìù –ü—Ä–æ–≥—Ä–µ—Å—Å

- [x] Backup —Å–æ–∑–¥–∞–Ω
- [ ] UUID error –∏—Å–ø—Ä–∞–≤–ª–µ–Ω
- [ ] TypeScript –æ—à–∏–±–∫–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã
- [ ] Failing test –∏—Å–ø—Ä–∞–≤–ª–µ–Ω
- [ ] JWT validation –¥–æ–±–∞–≤–ª–µ–Ω–∞
- [ ] –í—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç
- [ ] Lint –ø—Ä–æ—Ö–æ–¥–∏—Ç
- [ ] PR —Å–æ–∑–¥–∞–Ω

---

_–û–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏..._

