# üöÄ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Telegram Mini App

## –ü—Ä–æ–±–ª–µ–º–∞
Telegram Mini App —Ç—Ä–µ–±—É–µ—Ç HTTPS URL –¥–ª—è —Ä–∞–±–æ—Ç—ã. –õ–æ–∫–∞–ª—å–Ω—ã–π `http://localhost:5173` –Ω–µ –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å.

## ‚úÖ –†–µ—à–µ–Ω–∏–µ: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å ngrok –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è HTTPS —Ç—É–Ω–Ω–µ–ª—è

### –®–∞–≥ 1: –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å ngrok

**Windows:**
1. –°–∫–∞—á–∞–π—Ç–µ ngrok: https://ngrok.com/download
2. –†–∞—Å–ø–∞–∫—É–π—Ç–µ –≤ —É–¥–æ–±–Ω—É—é –ø–∞–ø–∫—É
3. –î–æ–±–∞–≤—å—Ç–µ –≤ PATH –∏–ª–∏ –∑–∞–ø—É—Å–∫–∞–π—Ç–µ –∏–∑ –ø–∞–ø–∫–∏

**–ò–ª–∏ —á–µ—Ä–µ–∑ chocolatey:**
```powershell
choco install ngrok
```

### –®–∞–≥ 2: –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è –∏ –ø–æ–ª—É—á–∏—Ç—å —Ç–æ–∫–µ–Ω

1. –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å –Ω–∞ https://ngrok.com/
2. –ü–æ–ª—É—á–∏—Ç–µ authtoken: https://dashboard.ngrok.com/get-started/your-authtoken
3. –í—ã–ø–æ–ª–Ω–∏—Ç–µ –∫–æ–º–∞–Ω–¥—É:
```bash
ngrok config add-authtoken YOUR_AUTHTOKEN
```

### –®–∞–≥ 3: –ó–∞–ø—É—Å—Ç–∏—Ç—å ngrok –¥–ª—è —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞

```bash
ngrok http 5173
```

–í—ã –ø–æ–ª—É—á–∏—Ç–µ URL –≤–∏–¥–∞: `https://xxxx-xxxx-xxxx.ngrok-free.app`

### –®–∞–≥ 4: –û–±–Ω–æ–≤–∏—Ç—å .env

–û–±–Ω–æ–≤–∏—Ç–µ —Ñ–∞–π–ª `.env`:
```env
TELEGRAM_WEB_APP_URL=https://xxxx-xxxx-xxxx.ngrok-free.app
VITE_API_URL=http://localhost:3000
```

**–í–∞–∂–Ω–æ:** Backend –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –¥–æ—Å—Ç—É–ø–µ–Ω –∏–∑ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞, –ø–æ—ç—Ç–æ–º—É –æ—Å—Ç–∞–≤—å—Ç–µ `http://localhost:3000`

### –®–∞–≥ 5: –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –±–æ—Ç–∞

–í—ã–ø–æ–ª–Ω–∏—Ç–µ –∫–æ–º–∞–Ω–¥—É –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ Menu Button:

```bash
curl -X POST "https://api.telegram.org/bot8339258038:AAHd4UGAxiDxI57TBi5_REn1GBOg1n50cro/setChatMenuButton" \
  -H "Content-Type: application/json" \
  -d '{
    "menu_button": {
      "type": "web_app",
      "text": "–û—Ç–∫—Ä—ã—Ç—å –∞–¥–º–∏–Ω–∫—É",
      "web_app": {
        "url": "https://xxxx-xxxx-xxxx.ngrok-free.app"
      }
    }
  }'
```

**–ó–∞–º–µ–Ω–∏—Ç–µ `https://xxxx-xxxx-xxxx.ngrok-free.app` –Ω–∞ –≤–∞—à ngrok URL!**

### –®–∞–≥ 6: –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–∏—Å—ã

```bash
docker-compose restart backend frontend
```

### –®–∞–≥ 7: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

1. –û—Ç–∫—Ä–æ–π—Ç–µ –≤–∞—à–µ–≥–æ –∞–¥–º–∏–Ω-–±–æ—Ç–∞ –≤ Telegram
2. –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É –º–µ–Ω—é (–∏–∫–æ–Ω–∫–∞ –≤ –ª–µ–≤–æ–º –Ω–∏–∂–Ω–µ–º —É–≥–ª—É –ø–æ–ª—è –≤–≤–æ–¥–∞)
3. –í—ã–±–µ—Ä–∏—Ç–µ "–û—Ç–∫—Ä—ã—Ç—å –∞–¥–º–∏–Ω–∫—É"
4. –î–æ–ª–∂–Ω–∞ –æ—Ç–∫—Ä—ã—Ç—å—Å—è –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å –≤–Ω—É—Ç—Ä–∏ Telegram

---

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ –±–æ—Ç–∞

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ç–µ–∫—É—â—É—é –Ω–∞—Å—Ç—Ä–æ–π–∫—É Menu Button:

```bash
curl "https://api.telegram.org/bot8339258038:AAHd4UGAxiDxI57TBi5_REn1GBOg1n50cro/getChatMenuButton"
```

---

## üêõ –ï—Å–ª–∏ –¥–∞–Ω–Ω—ã–µ –Ω–µ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è

### –ü—Ä–æ–±–ª–µ–º–∞ 1: CORS

Frontend –ø—ã—Ç–∞–µ—Ç—Å—è –æ–±—Ä–∞—Ç–∏—Ç—å—Å—è –∫ backend, –Ω–æ CORS –±–ª–æ–∫–∏—Ä—É–µ—Ç –∑–∞–ø—Ä–æ—Å—ã.

**–†–µ—à–µ–Ω–∏–µ:** –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –≤ `backend/src/main.ts` –Ω–∞—Å—Ç—Ä–æ–µ–Ω CORS:

```typescript
app.enableCors({
  origin: [
    'http://localhost:5173',
    'https://*.ngrok-free.app',
    'https://*.ngrok.io',
  ],
  credentials: true,
});
```

### –ü—Ä–æ–±–ª–µ–º–∞ 2: API URL –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π

–í Telegram Mini App —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ —Ä–∞–±–æ—Ç–∞–µ—Ç —á–µ—Ä–µ–∑ HTTPS, –Ω–æ backend –º–æ–∂–µ—Ç –±—ã—Ç—å –ª–æ–∫–∞–ª—å–Ω—ã–º.

**–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤ browser console:**
- –ö–∞–∫–æ–π API URL –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è
- –ï—Å—Ç—å –ª–∏ –æ—à–∏–±–∫–∏ —Å–µ—Ç–∏

**–†–µ—à–µ–Ω–∏–µ:** –°–æ–∑–¥–∞–π—Ç–µ ngrok —Ç—É–Ω–Ω–µ–ª—å –∏ –¥–ª—è backend:

```bash
# –¢–µ—Ä–º–∏–Ω–∞–ª 1: Frontend
ngrok http 5173

# –¢–µ—Ä–º–∏–Ω–∞–ª 2: Backend
ngrok http 3000
```

–û–±–Ω–æ–≤–∏—Ç–µ `.env`:
```env
TELEGRAM_WEB_APP_URL=https://xxxx-frontend.ngrok-free.app
VITE_API_URL=https://yyyy-backend.ngrok-free.app
```

### –ü—Ä–æ–±–ª–µ–º–∞ 3: –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

**–°–∏–º–ø—Ç–æ–º:** "–ù–µ–≤–µ—Ä–Ω–∞—è –ø–æ–¥–ø–∏—Å—å –¥–∞–Ω–Ω—ã—Ö"

**–†–µ—à–µ–Ω–∏–µ:** 
1. –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ `ADMIN_BOT_TOKEN` –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –≤ `.env`
2. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ backend
3. –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ dev-–≤—Ö–æ–¥ (–∫–Ω–æ–ø–∫–∞ –ø–æ—è–≤–ª—è–µ—Ç—Å—è –≤ dev-—Ä–µ–∂–∏–º–µ)

---

## üì± –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π —Å–ø–æ—Å–æ–±: –†–∞–∑–≤–µ—Ä–Ω—É—Ç—å –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

–î–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞ –Ω—É–∂–Ω–æ —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—å –Ω–∞ —Ä–µ–∞–ª—å–Ω–æ–º —Å–µ—Ä–≤–µ—Ä–µ —Å HTTPS:

1. **VPS** (DigitalOcean, Hetzner, AWS)
2. **Cloudflare Tunnel** (–±–µ—Å–ø–ª–∞—Ç–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç)
3. **Vercel** –¥–ª—è —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞ + Railway/Render –¥–ª—è backend

---

## üéØ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç (TL;DR)

```bash
# 1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å ngrok
# 2. –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç—É–Ω–Ω–µ–ª—å
ngrok http 5173

# 3. –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å URL (–Ω–∞–ø—Ä–∏–º–µ—Ä: https://1234-5678-9012.ngrok-free.app)
# 4. –û–±–Ω–æ–≤–∏—Ç—å .env
# TELEGRAM_WEB_APP_URL=https://1234-5678-9012.ngrok-free.app

# 5. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –±–æ—Ç–∞ (–∑–∞–º–µ–Ω–∏—Ç–µ URL!)
curl -X POST "https://api.telegram.org/bot8339258038:AAHd4UGAxiDxI57TBi5_REn1GBOg1n50cro/setChatMenuButton" \
  -H "Content-Type: application/json" \
  -d '{"menu_button":{"type":"web_app","text":"–û—Ç–∫—Ä—ã—Ç—å –∞–¥–º–∏–Ω–∫—É","web_app":{"url":"https://1234-5678-9012.ngrok-free.app"}}}'

# 6. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å
docker-compose restart

# 7. –û—Ç–∫—Ä—ã—Ç—å –±–æ—Ç–∞ –≤ Telegram –∏ –Ω–∞–∂–∞—Ç—å –∫–Ω–æ–ø–∫—É –º–µ–Ω—é
```

---

## ‚ùì –ß–∞—Å—Ç—ã–µ –≤–æ–ø—Ä–æ—Å—ã

**Q: –ü–æ—á–µ–º—É –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç localhost?**
A: Telegram —Ç—Ä–µ–±—É–µ—Ç HTTPS –¥–ª—è Mini Apps. localhost –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è.

**Q: ngrok URL –º–µ–Ω—è–µ—Ç—Å—è –ø—Ä–∏ –∫–∞–∂–¥–æ–º –∑–∞–ø—É—Å–∫–µ**
A: –ë–µ—Å–ø–ª–∞—Ç–Ω–∞—è –≤–µ—Ä—Å–∏—è –¥–∞–µ—Ç —Å–ª—É—á–∞–π–Ω—ã–π URL. –ü–ª–∞—Ç–Ω–∞—è –≤–µ—Ä—Å–∏—è –ø–æ–∑–≤–æ–ª—è–µ—Ç –∑–∞—Ä–µ–∑–µ—Ä–≤–∏—Ä–æ–≤–∞—Ç—å –¥–æ–º–µ–Ω.

**Q: –ú–æ–≥—É –ª–∏ —è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–≤–æ–π –¥–æ–º–µ–Ω?**
A: –î–∞, –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ Nginx/Caddy —Å SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–º –Ω–∞ VPS.

**Q: Backend —Ç–æ–∂–µ –Ω—É–∂–µ–Ω —á–µ—Ä–µ–∑ HTTPS?**
A: –ñ–µ–ª–∞—Ç–µ–ª—å–Ω–æ, –Ω–æ –º–æ–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å CORS –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å HTTP –¥–ª—è backend.

