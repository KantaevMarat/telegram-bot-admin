# üöÄ Telegram Mini App + Bot + Admin Panel

–ü–æ–ª–Ω–æ—Ü–µ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è Telegram –±–æ—Ç–æ–º —Å –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å—é, Mini App –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–µ–π –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏.

## üìã –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

- [–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏](#–≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏)
- [–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏](#—Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏)
- [–ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç](#–±—ã—Å—Ç—Ä—ã–π-—Å—Ç–∞—Ä—Ç)
- [–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞](#—Å—Ç—Ä—É–∫—Ç—É—Ä–∞-–ø—Ä–æ–µ–∫—Ç–∞)
- [–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è](#–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è)
- [–†–∞–∑—Ä–∞–±–æ—Ç–∫–∞](#—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞)
- [–î–µ–ø–ª–æ–π](#–¥–µ–ø–ª–æ–π)
- [–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è](#–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è)
- [–†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º](#—Ä–µ—à–µ–Ω–∏–µ-–ø—Ä–æ–±–ª–µ–º)

## ‚ú® –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### ü§ñ Telegram Bot
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π —á–µ—Ä–µ–∑ polling –∏–ª–∏ webhook
- ‚úÖ –ö–∞—Å—Ç–æ–º–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏ (—Ç—Ä–∏–≥–≥–µ—Ä—ã –∏ –æ—Ç–≤–µ—Ç—ã)
- ‚úÖ –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ –∫–Ω–æ–ø–∫–∏ –º–µ–Ω—é (–Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—é—Ç—Å—è –≤ –∞–¥–º–∏–Ω–∫–µ)
- ‚úÖ –°–∏—Å—Ç–µ–º–∞ –∑–∞–¥–∞–Ω–∏–π —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –∏–ª–∏ —Ä—É—á–Ω–æ–π –ø—Ä–æ–≤–µ—Ä–∫–æ–π
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–ø–∏—Å–∫–∏ –Ω–∞ –∫–∞–Ω–∞–ª—ã
- ‚úÖ –†–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞
- ‚úÖ –í—ã–≤–æ–¥ —Å—Ä–µ–¥—Å—Ç–≤ (USDT TRC20)
- ‚úÖ –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –∏–Ω–≤–∞–ª–∏–¥–∞—Ü–∏–µ–π

### üíº Admin Panel
- ‚úÖ –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ JWT
- ‚úÖ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏
- ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ –∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤
- ‚úÖ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–Ω–æ–ø–∫–∞–º–∏ –º–µ–Ω—é –±–æ—Ç–∞
- ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–¥–∞–Ω–∏–π –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞—è–≤–æ–∫ –Ω–∞ –≤—ã–≤–æ–¥ —Å—Ä–µ–¥—Å—Ç–≤
- ‚úÖ –†–∞—Å—Å—ã–ª–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π
- ‚úÖ –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ (—Ä–µ–∞–ª—å–Ω–∞—è –∏ —Ñ–µ–π–∫–æ–≤–∞—è)
- ‚úÖ Real-time –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —á–µ—Ä–µ–∑ WebSocket
- ‚úÖ –¢–µ–º–Ω–∞—è/—Å–≤–µ—Ç–ª–∞—è —Ç–µ–º–∞

### üîÑ –°–∏—Å—Ç–µ–º–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
- ‚úÖ **WebSocket** –¥–ª—è real-time –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π –≤ –∞–¥–º–∏–Ω–∫–µ
- ‚úÖ **Redis pub/sub** –¥–ª—è —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–π —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
- ‚úÖ **In-memory –∫–µ—à** —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –∏–Ω–≤–∞–ª–∏–¥–∞—Ü–∏–µ–π
- ‚úÖ **–î–≤—É—Å—Ç–æ—Ä–æ–Ω–Ω—è—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è** –º–µ–∂–¥—É –≤—Å–µ–º–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º–∏
- ‚úÖ –†–∞–±–æ—Ç–∞ –±–µ–∑ Redis (local-only —Ä–µ–∂–∏–º)

### üì± Telegram Mini App
- ‚úÖ –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ Telegram WebApp
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å backend API
- ‚úÖ Real-time —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö

## üõ† –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

### Backend
- **NestJS** - —Ñ—Ä–µ–π–º–≤–æ—Ä–∫ –¥–ª—è Node.js
- **TypeORM** - ORM –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å PostgreSQL
- **PostgreSQL** - –æ—Å–Ω–æ–≤–Ω–∞—è –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
- **Redis** - –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ pub/sub
- **Socket.io** - WebSocket –¥–ª—è real-time
- **BullMQ** - –æ—á–µ—Ä–µ–¥–∏ –∑–∞–¥–∞—á
- **MinIO** - —Ö—Ä–∞–Ω–∏–ª–∏—â–µ –º–µ–¥–∏–∞—Ñ–∞–π–ª–æ–≤ (S3-—Å–æ–≤–º–µ—Å—Ç–∏–º–æ–µ)
- **Swagger** - –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API

### Frontend
- **React 18** - UI –±–∏–±–ª–∏–æ—Ç–µ–∫–∞
- **TypeScript** - —Ç–∏–ø–∏–∑–∞—Ü–∏—è
- **Vite** - —Å–±–æ—Ä—â–∏–∫
- **TanStack Query** - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º —Å–µ—Ä–≤–µ—Ä–∞
- **Zustand** - –≥–ª–æ–±–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
- **Socket.io-client** - WebSocket –∫–ª–∏–µ–Ω—Ç
- **Axios** - HTTP –∫–ª–∏–µ–Ω—Ç

### Infrastructure
- **Docker & Docker Compose** - –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è
- **Nginx** - –≤–µ–±-—Å–µ—Ä–≤–µ—Ä (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

- **Node.js** 18+ –∏ npm
- **Docker** –∏ Docker Compose (–¥–ª—è –ë–î –∏ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã)
- **Telegram Bot Token** (–ø–æ–ª—É—á–∏—Ç—å —É @BotFather)

### 1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ —É—Å—Ç–∞–Ω–æ–≤–∫–∞

```bash
git clone <repository-url>
cd tg-main

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
cd backend && npm install
cd ../frontend && npm install
```

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env` –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞ (–∏–ª–∏ —Å–∫–æ–ø–∏—Ä—É–π—Ç–µ –∏–∑ `env.example.txt`):

```env
# Database
DATABASE_URL=postgresql://postgres:postgres@localhost:15432/tg_app

# Redis
REDIS_HOST=localhost
REDIS_PORT=6379

# Backend
NODE_ENV=development
BACKEND_PORT=3000
JWT_SECRET=your-super-strong-jwt-secret-with-at-least-32-characters
JWT_EXPIRES_IN=7d

# Telegram Bot
TELEGRAM_BOT_TOKEN=your_bot_token_from_botfather
TELEGRAM_BOT_USERNAME=YourBotUsername

# MinIO (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
MINIO_ENDPOINT=localhost
MINIO_PORT=9000
MINIO_ACCESS_KEY=minioadmin
MINIO_SECRET_KEY=minioadmin

# Frontend
VITE_API_URL=http://localhost:3000
```

### 3. –ó–∞–ø—É—Å–∫ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã

```bash
# –ó–∞–ø—É—Å–∫ PostgreSQL, Redis –∏ MinIO
docker-compose up -d postgres redis minio
```

### 4. –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–π –∏ seed

```bash
cd backend

# –ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏
npm run migration:run

# –ó–∞–ø–æ–ª–Ω–∏—Ç—å –Ω–∞—á–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
npm run seed

# –°–æ–∑–¥–∞—Ç—å –∞–¥–º–∏–Ω–∞
npm run cli:add-admin
```

### 5. –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

**Terminal 1 - Backend:**
```bash
cd backend
npm run start:dev
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm run dev
```

### 6. –î–æ—Å—Ç—É–ø –∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è–º

- **Admin Panel**: http://localhost:5173
- **Backend API**: http://localhost:3000/api
- **Swagger Docs**: http://localhost:3000/api/docs
- **Telegram Bot**: –æ—Ç–ø—Ä–∞–≤—å—Ç–µ `/start` –≤–∞—à–µ–º—É –±–æ—Ç—É –≤ Telegram

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
tg-main/
‚îú‚îÄ‚îÄ backend/                  # NestJS backend
‚îÇ   ‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ modules/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ auth/        # –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ admin/       # –ê–¥–º–∏–Ω —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ bot/         # Telegram bot –ª–æ–≥–∏–∫–∞
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ sync/        # –°–∏—Å—Ç–µ–º–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ scenarios/   # –°—Ü–µ–Ω–∞—Ä–∏–∏ –±–æ—Ç–∞
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ buttons/     # –ö–Ω–æ–ø–∫–∏ –º–µ–Ω—é
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ tasks/       # –ó–∞–¥–∞–Ω–∏—è
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ users/       # –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ payouts/     # –í—ã–ø–ª–∞—Ç—ã
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ settings/    # –ù–∞—Å—Ç—Ä–æ–π–∫–∏
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ stats/       # –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ entities/        # TypeORM –º–æ–¥–µ–ª–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ database/        # –ú–∏–≥—Ä–∞—Ü–∏–∏ –∏ seed
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ main.ts          # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞
‚îÇ   ‚îî‚îÄ‚îÄ package.json
‚îÇ
‚îú‚îÄ‚îÄ frontend/                 # React admin panel
‚îÇ   ‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ pages/           # –°—Ç—Ä–∞–Ω–∏—Ü—ã –∞–¥–º–∏–Ω–∫–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ components/      # React –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ hooks/           # useSync –∏ –¥—Ä.
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ api/             # API –∫–ª–∏–µ–Ω—Ç
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ store/           # Zustand stores
‚îÇ   ‚îî‚îÄ‚îÄ package.json
‚îÇ
‚îú‚îÄ‚îÄ docker-compose.yml        # Docker –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îú‚îÄ‚îÄ .env                      # –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
‚îú‚îÄ‚îÄ README.md                 # –≠—Ç–æ—Ç —Ñ–∞–π–ª
‚îú‚îÄ‚îÄ QUICK_START.md            # –ë—ã—Å—Ç—Ä–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è
‚îú‚îÄ‚îÄ SYNC_SYSTEM.md            # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
‚îî‚îÄ‚îÄ TROUBLESHOOTING.md        # –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º
```

## ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Telegram –ë–æ—Ç–∞

1. –°–æ–∑–¥–∞–π—Ç–µ –±–æ—Ç–∞ —É @BotFather
2. –ü–æ–ª—É—á–∏—Ç–µ —Ç–æ–∫–µ–Ω
3. –î–æ–±–∞–≤—å—Ç–µ —Ç–æ–∫–µ–Ω –≤ `.env`:
   ```env
   TELEGRAM_BOT_TOKEN=123456:ABC-DEF1234ghIkl-zyx57W2v1u123ew11
   ```

### Webhook vs Polling

**Development (Polling):**
–ë–æ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç polling –≤ —Ä–µ–∂–∏–º–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏.

**Production (Webhook):**
```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å webhook
curl -X POST http://localhost:3000/api/bot/set-webhook \
  -H "Content-Type: application/json" \
  -d '{"url": "https://your-domain.com/api/bot/webhook"}'
```

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ MinIO (—Ö—Ä–∞–Ω–∏–ª–∏—â–µ –º–µ–¥–∏–∞)

MinIO –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –∏ —Ñ–∞–π–ª–æ–≤:

1. –û—Ç–∫—Ä–æ–π—Ç–µ –∫–æ–Ω—Å–æ–ª—å: http://localhost:9001
2. –í–æ–π–¥–∏—Ç–µ: `minioadmin / minioadmin`
3. –°–æ–∑–¥–∞–π—Ç–µ bucket `telegram-media`

## üë®‚Äçüíª –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

### –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –∞–¥–º–∏–Ω–∞

```bash
cd backend
npm run cli:add-admin
```

–°–ª–µ–¥—É–π—Ç–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —É—á–µ—Ç–Ω–æ–π –∑–∞–ø–∏—Å–∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞.

### –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–π

```bash
cd backend

# –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é –º–∏–≥—Ä–∞—Ü–∏—é
npm run migration:create src/migrations/MyMigration

# –ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏
npm run migration:run

# –û—Ç–∫–∞—Ç–∏—Ç—å –ø–æ—Å–ª–µ–¥–Ω—é—é –º–∏–≥—Ä–∞—Ü–∏—é
npm run migration:revert
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–¥–∞

```bash
# Backend
cd backend
npm run lint

# Frontend
cd frontend
npm run lint
```

### –¢–µ—Å—Ç—ã

```bash
# Backend
cd backend
npm test

# E2E —Ç–µ—Å—Ç—ã
npm run test:e2e
```

## üö¢ –î–µ–ø–ª–æ–π

### Docker (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

```bash
# –°–±–æ—Ä–∫–∞ –∏ –∑–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
docker-compose up -d

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞
docker-compose ps

# –õ–æ–≥–∏
docker-compose logs -f backend
```

### Manual Deploy

1. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ production –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö –∏ Redis
2. –û–±–Ω–æ–≤–∏—Ç–µ `.env` —Å production –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏
3. –°–æ–±–µ—Ä–∏—Ç–µ –ø—Ä–æ–µ–∫—Ç—ã:
   ```bash
   cd backend && npm run build
   cd ../frontend && npm run build
   ```
4. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —á–µ—Ä–µ–∑ PM2 –∏–ª–∏ systemd

### Environment Variables –¥–ª—è Production

```env
NODE_ENV=production
DATABASE_URL=postgresql://user:pass@host:5432/dbname
REDIS_HOST=your-redis-host
JWT_SECRET=very-strong-random-secret-min-32-chars
TELEGRAM_BOT_TOKEN=your_real_bot_token
TELEGRAM_WEBHOOK_URL=https://yourdomain.com/api/bot/webhook
```

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- **[QUICK_START.md](./QUICK_START.md)** - –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç —Å–∏—Å—Ç–µ–º—ã —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
- **[SYNC_SYSTEM.md](./SYNC_SYSTEM.md)** - –ü–æ–¥—Ä–æ–±–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è —Å–∏—Å—Ç–µ–º—ã —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
- **[TROUBLESHOOTING.md](./TROUBLESHOOTING.md)** - –†–µ—à–µ–Ω–∏–µ —Ç–∏–ø–∏—á–Ω—ã—Ö –ø—Ä–æ–±–ª–µ–º
- **[DOCKER_SETUP.md](./DOCKER_SETUP.md)** - Docker –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
- **[API Docs](http://localhost:3000/api/docs)** - Swagger –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API

## üîç –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### Backend –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è

**–ü—Ä–æ–±–ª–µ–º–∞:** `JWT_SECRET is too weak`

**–†–µ—à–µ–Ω–∏–µ:** –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ JWT_SECRET —Å–æ–¥–µ—Ä–∂–∏—Ç –º–∏–Ω–∏–º—É–º 32 —Å–∏–º–≤–æ–ª–∞:
```env
JWT_SECRET=this-is-a-very-strong-jwt-secret-key-with-more-than-32-characters
```

### –ë–æ—Ç –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç

**–ü—Ä–æ–±–ª–µ–º–∞:** –¢–æ–∫–µ–Ω –Ω–µ–¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª–µ–Ω (401 Unauthorized)

**–†–µ—à–µ–Ω–∏–µ:** 
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ç–æ–∫–µ–Ω —É @BotFather
2. –û–±–Ω–æ–≤–∏—Ç–µ `.env` —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º —Ç–æ–∫–µ–Ω–æ–º
3. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ backend

**–ü—Ä–æ–±–ª–µ–º–∞:** Polling –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ backend
cd backend
npm run start:dev

# –î–æ–ª–∂–Ω–æ –±—ã—Ç—å:
# ü§ñ Starting bot polling...
# ‚úÖ BotService subscribed to sync events
```

### WebSocket –Ω–µ –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è

**–ü—Ä–æ–±–ª–µ–º–∞:** `WebSocket connection failed`

**–†–µ—à–µ–Ω–∏–µ:**
1. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ backend –∑–∞–ø—É—â–µ–Ω –Ω–∞ –ø–æ—Ä—Ç—É 3000
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ CORS –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ `backend/src/main.ts`
3. –û—Ç–∫—Ä–æ–π—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ (F12) –¥–ª—è –ø–æ–¥—Ä–æ–±–Ω—ã—Ö –ª–æ–≥–æ–≤

### Redis –Ω–µ –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è

**–ü—Ä–æ–±–ª–µ–º–∞:** `Failed to connect to Redis`

**–†–µ—à–µ–Ω–∏–µ:**
–≠—Ç–æ –ù–ï –∫—Ä–∏—Ç–∏—á–Ω–æ! –°–∏—Å—Ç–µ–º–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ Redis –≤ local-only —Ä–µ–∂–∏–º–µ.

–ß—Ç–æ–±—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Redis:
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ Redis –∑–∞–ø—É—â–µ–Ω
docker ps | grep redis

# –ï—Å–ª–∏ –Ω–µ—Ç - –∑–∞–ø—É—Å—Ç–∏—Ç–µ
docker-compose up -d redis

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ
docker exec -it tg-redis redis-cli ping
# –î–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å: PONG
```

## üéØ –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏

### –°–æ–∑–¥–∞–Ω–∏–µ —Å—Ü–µ–Ω–∞—Ä–∏—è –≤ –∞–¥–º–∏–Ω–∫–µ

1. –û—Ç–∫—Ä–æ–π—Ç–µ http://localhost:5173
2. –í–æ–π–¥–∏—Ç–µ –∫–∞–∫ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä
3. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **–°—Ü–µ–Ω–∞—Ä–∏–∏** ‚Üí **–°–æ–∑–¥–∞—Ç—å —Å—Ü–µ–Ω–∞—Ä–∏–π**
4. –£–∫–∞–∂–∏—Ç–µ:
   - **–ù–∞–∑–≤–∞–Ω–∏–µ**: –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ
   - **–¢—Ä–∏–≥–≥–µ—Ä**: –ø—Ä–∏–≤–µ—Ç
   - **–û—Ç–≤–µ—Ç**: –ó–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ! –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å!
5. –ù–∞–∂–º–∏—Ç–µ **–°–æ–∑–¥–∞—Ç—å**

–¢–µ–ø–µ—Ä—å –±–æ—Ç –±—É–¥–µ—Ç –æ—Ç–≤–µ—á–∞—Ç—å –Ω–∞ —Å–æ–æ–±—â–µ–Ω–∏–µ "–ø—Ä–∏–≤–µ—Ç"!

### –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–¥–∞–Ω–∏—è

1. **–ó–∞–¥–∞–Ω–∏—è** ‚Üí **–°–æ–∑–¥–∞—Ç—å –∑–∞–¥–∞–Ω–∏–µ**
2. –£–∫–∞–∂–∏—Ç–µ:
   - **–ù–∞–∑–≤–∞–Ω–∏–µ**: –ü–æ–¥–ø–∏—Å–∞—Ç—å—Å—è –Ω–∞ –∫–∞–Ω–∞–ª
   - **–¢–∏–ø**: subscription
   - **ID –∫–∞–Ω–∞–ª–∞**: @your_channel
   - **–ù–∞–≥—Ä–∞–¥–∞**: 10-50 USDT
   - **–ú–∞–∫—Å. –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–π**: 1
3. –ù–∞–∂–º–∏—Ç–µ **–°–æ–∑–¥–∞—Ç—å**

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∫–Ω–æ–ø–∫–∏ –≤ –º–µ–Ω—é –±–æ—Ç–∞

1. **–ö–Ω–æ–ø–∫–∏** ‚Üí **–°–æ–∑–¥–∞—Ç—å –∫–Ω–æ–ø–∫—É**
2. –£–∫–∞–∂–∏—Ç–µ:
   - **–ú–µ—Ç–∫–∞**: üí∞ –ë–∞–ª–∞–Ω—Å
   - **–¢–∏–ø –¥–µ–π—Å—Ç–≤–∏—è**: command
   - **–ö–æ–º–∞–Ω–¥–∞**: balance
   - **–°—Ç—Ä–æ–∫–∞**: 1, **–ö–æ–ª–æ–Ω–∫–∞**: 1
3. –ù–∞–∂–º–∏—Ç–µ **–°–æ–∑–¥–∞—Ç—å**

–ö–Ω–æ–ø–∫–∞ –ø–æ—è–≤–∏—Ç—Å—è –≤ –±–æ—Ç–µ –º–≥–Ω–æ–≤–µ–Ω–Ω–æ!

## üîÑ –°–∏—Å—Ç–µ–º–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏

–í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∞–¥–º–∏–Ω–∫–µ **–º–≥–Ω–æ–≤–µ–Ω–Ω–æ** –æ—Ç—Ä–∞–∂–∞—é—Ç—Å—è –≤ –±–æ—Ç–µ –∏ Mini App –±–ª–∞–≥–æ–¥–∞—Ä—è:

1. **WebSocket** - real-time –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –≤ –∞–¥–º–∏–Ω–∫–µ
2. **Redis pub/sub** - —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –º–µ–∂–¥—É –∏–Ω—Å—Ç–∞–Ω—Å–∞–º–∏ backend
3. **–ö–µ—à –∏–Ω–≤–∞–ª–∏–¥–∞—Ü–∏—è** - –±–æ—Ç –≤—Å–µ–≥–¥–∞ –∑–∞–≥—Ä—É–∂–∞–µ—Ç –∞–∫—Ç—É–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ

**–°–æ–±—ã—Ç–∏—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏:**
- `scenarios.*` - —Å—Ü–µ–Ω–∞—Ä–∏–∏
- `buttons.*` - –∫–Ω–æ–ø–∫–∏
- `tasks.*` - –∑–∞–¥–∞–Ω–∏—è
- `settings.*` - –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
- `users.*` - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏
- `payouts.*` - –≤—ã–ø–ª–∞—Ç—ã

–ü–æ–¥—Ä–æ–±–Ω–µ–µ –≤ [SYNC_SYSTEM.md](./SYNC_SYSTEM.md)

## ü§ù –í–∫–ª–∞–¥ –≤ –ø—Ä–æ–µ–∫—Ç

1. Fork —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
2. –°–æ–∑–¥–∞–π—Ç–µ feature –≤–µ—Ç–∫—É: `git checkout -b feature/amazing-feature`
3. Commit –∏–∑–º–µ–Ω–µ–Ω–∏—è: `git commit -m 'Add amazing feature'`
4. Push –≤ –≤–µ—Ç–∫—É: `git push origin feature/amazing-feature`
5. –û—Ç–∫—Ä–æ–π—Ç–µ Pull Request

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

MIT License

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ï—Å–ª–∏ –≤–æ–∑–Ω–∏–∫–ª–∏ –≤–æ–ø—Ä–æ—Å—ã:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ [TROUBLESHOOTING.md](./TROUBLESHOOTING.md)
2. –ò–∑—É—á–∏—Ç–µ [SYNC_SYSTEM.md](./SYNC_SYSTEM.md)
3. –û—Ç–∫—Ä–æ–π—Ç–µ Issue –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏

---

**–°—Ç–∞—Ç—É—Å –ø—Ä–æ–µ–∫—Ç–∞:** ‚úÖ Production Ready

**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:** 29 –æ–∫—Ç—è–±—Ä—è 2025

**–í–µ—Ç–∫–∞:** `sync/cleanup/2025-10-29`

